# Документация
При реализации тестового я выделил следующие требования к движку частиц:
- Минимизация используемой памяти. В реализации, помимо пула частиц, использовался дополнительный рендер буфер, состоящий из положений и цвета частиц (uint32_t по 1 байту на канал). Это вся необходимая информация для корректной работы рендера. Помимо этого, в рендер-буфер копируются только живые частицы, количество которых известно системе и которые всегда находятся в начале пула частиц. Это реализуется в update методе - если частица умирает, то она свапается с последней активной в пуле частицей через указатели. Таким образом, скорость swap'а не зависит от количества данных в структуре каждой частицы.
- Минимизация времени блокировок. Сейчас блокировки возможны в следующих ситуациях:
        1. Когда рендер пытается получить доступ к рендер-буферу в момент копирования в него данных из системы частиц.
        2. В момент клика пользователя на экран, если с вектором spawnList (хранит информацию о позиции спавна частиц) работает другой поток.

# Детали реализации
В реализации исопльзовался дополнительный рендер-буфер, в который каждый раз копируется информация после обновления состояния частиц.
Цикл работы с частицами состоит из двух этапов: создания частиц (particlesEmit) и обновления состояния активных частиц (particlesUpdate)
#### Particles Emit
Создает min(64, freeParticles) частиц для каждой координаты в векторе spawnList. 
SpawnList заполняется координатами спавна новых частиц при клике на экран, либо с определенной вероятностью при смерти отрисованной частицы. В конце метода spawnList очищается.
#### Particles Update
Здесь реализована логика обновления состояний - изменение положения, цвета, активности частиц. Если lifetime частицы < 0, то она перемещается в конец пула активных частиц, размер пула декрементируется. Также, с некоторой вероятностью при смерти частицы заполняется вектор spawnList значением позиции этой частицы 
#### Init Particle
Инициализация частицы, заполнение случайными параметрами (скорость, время жизни и т.д.)
    
# Возможные улучшения
- Не копировать информацию через memcpy в рендер-буфер. Вместо этого использовать swap буферов через указатели, а в particlesUpdate обновлять состояние частиц на основе последнего кадра (последний кадр всегда read-only как для системы частиц, так и для рендера)